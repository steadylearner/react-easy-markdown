"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_marked=_interopRequireDefault(require("marked")),_highlight=_interopRequireDefault(require("highlight.js")),_propTypes=_interopRequireDefault(require("prop-types")),_dompurify=_interopRequireDefault(require("dompurify")),_jsdom=require("jsdom"),_api=require("./api");function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _objectSpread(a){for(var b=1;b<arguments.length;b++){var c=null==arguments[b]?{}:arguments[b],d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){_defineProperty(a,b,c[b])})}return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var window=new _jsdom.JSDOM("").window,DOMPurify=(0,_dompurify.default)(window);function MarkdownPreview(a){var b=a.markedOptions,c=a.value,d=a.className,e=a.set,f=a.titleMessage,g={};b&&(g=b,g=_objectSpread({gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!1,langPrefix:"hljs "},g),"undefined"!=typeof _highlight.default&&(g=_objectSpread({},g,{highlight:function highlight(a,b){return!(b&&_highlight.default.getLanguage(b))?a:_highlight.default.highlight(b,a).value}})),_marked.default.setOptions(g));var h=new _marked.default.Renderer;h.link=function(a,b,c){var d=(0,_api.substitutePrefixes)(a)(e);return"<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"".concat(d,"\" title=\"").concat(null===b?"".concat(f," ").concat(d):b,"\" >").concat(c,"</a>")};var i=DOMPurify.sanitize((0,_marked.default)(c||"",{renderer:h}));return _react.default.createElement("div",{dangerouslySetInnerHTML:{__html:i},className:d})}MarkdownPreview.propTypes={value:_propTypes.default.string,className:_propTypes.default.string,markedOptions:_propTypes.default.object,set:_propTypes.default.array,titleMessage:_propTypes.default.string},MarkdownPreview.defaultProps={value:"",set:[["s-","https://"]],titleMessage:"Click it will open a new tab at"};var _default=MarkdownPreview;exports.default=_default;