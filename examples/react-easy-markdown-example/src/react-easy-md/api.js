"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.copy=copy,exports.readLocalFileWithHow=readLocalFileWithHow,exports.saveTextFromWeb=saveTextFromWeb,exports.reverseSet=exports.useRegex=exports.useShortcut=exports.substitutePrefixes=exports.substitutePrefix=exports.markdown=exports.html=void 0;var _marked=require("marked"),_showdown=_interopRequireDefault(require("showdown")),_ramda=require("./ramda");function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var html=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",b=(0,_marked.parser)((0,_marked.lexer)(a));return b};exports.html=html,exports.html=html=(0,_ramda.memoizeWith)(_ramda.identity,html);var markdown=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",b=new _showdown.default.Converter,c=b.makeMarkdown(a);return c};exports.markdown=markdown,exports.markdown=markdown=(0,_ramda.memoizeWith)(_ramda.identity,markdown);var substitutePrefix=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"https://www.steadylearner.com";return function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:["s-","https://"],c=a.startsWith(b[0]);return c?"".concat(b[1]).concat(a.split(b[0])[1]):a}};exports.substitutePrefix=substitutePrefix;var substitutePrefixes=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"https://www.steadylearner.com";return function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[["s-","https://"]],c=b.filter(function(b){return a.startsWith(b[0])});return 1===c.length?"".concat(c[0][1]).concat(a.split(c[0][0])[1]):a}};exports.substitutePrefixes=substitutePrefixes,exports.substitutePrefixes=substitutePrefixes=(0,_ramda.memoizeWith)(_ramda.identity,substitutePrefixes);var reverseSet=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[[]];return a.map(function(a){return a.reverse()})};exports.reverseSet=reverseSet,exports.reverseSet=reverseSet=(0,_ramda.memoizeWith)(_ramda.identity,reverseSet);var useShortcut=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[["s-","https://"]];return function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=b;return a.forEach(function(a){var b=new RegExp(": ".concat(a[0]),"g");c=c.replace(b,": ".concat(a[1])),b=new RegExp("[(]"+a[0],"g"),c=c.replace(b,"("+a[1])}),c}};exports.useShortcut=useShortcut,exports.useShortcut=useShortcut=(0,_ramda.memoizeWith)(_ramda.identity,useShortcut);var useRegex=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[[/<br\s*?>/gi,"\r\n"],[/&lt;/g,"<"],[/&gt;/g,">"],[/&amp;/g,"&"]];return function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=b;return a.forEach(function(a){c=c.replace(a[0],a[1])}),c}};exports.useRegex=useRegex,exports.useRegex=useRegex=(0,_ramda.memoizeWith)(_ramda.identity,useRegex);function copy(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:useRegex(),c=document.createElement("textarea");c.innerText=a,document.body.appendChild(c);var d=b(c.innerHTML);c.value=d,c.select(),document.execCommand("copy"),c.remove()}function readLocalFileWithHow(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},c=a.target.files[0];if(c&&{}!==b){var d=new FileReader;d.onload=function(a){var c=a.target.result;b(c)},d.readAsText(c)}}function saveTextFromWeb(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"README.md",c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"text/plain",d=new Blob([a],{type:c}),e=window.URL.createObjectURL(d),f=document.createElement("a");f.download=b,f.innerHTML="Save File from Web",f.href=e,f.onclick=destroyClickedElement,f.style.display="none",document.body.appendChild(f),f.click()}function destroyClickedElement(a){document.body.removeChild(a.target)}